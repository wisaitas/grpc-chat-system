syntax = "proto3";

package user;

option go_package = "gen/server/v1/user";

message RegisterRequest {
string email = 1;
string password = 2;
}


message RegisterResponse {
uint64 id = 1;
string email = 2;
}


message LoginRequest {
string email = 1;
string password = 2;
}


message LoginResponse {
string access_token = 1;
int64 expires_at = 2; // unix seconds
}


message Empty {}


message User {
uint64 id = 1;
string email = 2;
string created_at = 3; // RFC3339
}


message ListUsersResponse {
repeated User users = 1;
}


service UserService {
rpc Register(RegisterRequest) returns (RegisterResponse);

rpc Login(LoginRequest) returns (LoginResponse);

rpc ListUsers(Empty) returns (ListUsersResponse);
}